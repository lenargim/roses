let $=jQuery;$(document).ready(function(){$(".phone").mask("+7(Z00) 000-00-00",{translation:{Z:{pattern:/[0-79]/}}}),$(".sidebar__button").on("click",function(){$(this).parent(".sidebar__toggle").toggleClass("open")}),$(".change-product-qty").on("click",function(){var a=$(this).data("type"),t=$(this).siblings(".quantity").find("input"),e=+t.val();let n;n="plus"===a?!(a=t.attr("max"))||1+e<=a?1+e:a:(a=t.attr("min")||1)<=e-1?e-1:a,t.val(n)}),$(document).on("click",".single_add_to_cart_button:not(.disabled)",function(a){let t=$(this),e=t.closest("form.cart"),n=(o=e[0],o=new FormData(o,this),c={},o.forEach(function(e,n){var o,i;n.includes("[")?(o=n.split(/\[|\]/).filter(function(a){return a}),i=c,o.forEach(function(a,t){t===o.length-1?Array.isArray(i[a])?i[a].push(e):i[a]?i[a]=[i[a],e]:i[a]=n.includes("[]")?[e]:e:(i[a]||(i[a]={}),i=i[a])})):c[n]?Array.isArray(c[n])?c[n].push(e):c[n]=[c[n],e]:c[n]=e}),c.variation_id?c.product_id=c.variation_id:!c.product_id&&c["add-to-cart"]&&(c.product_id=c["add-to-cart"]),delete c["add-to-cart"],c);var o,c;return a.preventDefault(),$(document.body).trigger("adding_to_cart",[t,n]),$.ajax({type:"POST",url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:n,beforeSend:function(){t.prop("disabled",!0),t.removeClass("added").addClass("loading")},complete:function(){t.prop("disabled",!1),t.addClass("added").removeClass("loading")},success:function(a){e.find('input[name="quantity"]')[0].value=1,a.error&&a.product_url?window.location=a.product_url:$(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,t])}}),!1}),$("body").on("click",".modal__close",function(){$(".dark").removeClass("active")}),$(".file-wrap").on("change","input[type=file]",function(){var a=this.files[0];10485760<a.size?(alert("Превышен допустимый размер. 10MB Максимум."),this.value=""):$(this).siblings(".file-text").html(a.name)}),$(".send-cv").on("submit",async function(a){a.preventDefault();let t=[];$(this).find(".required").each(function(){$(this).find("input").val()||($(this).addClass("error"),t.push($(this).attr("name")))}),t.length||((a=new FormData).append("action","send_cv"),a.append("full_name",$(this).find("#full-name").val()),a.append("phone",$(this).find("#phone").val()),a.append("vacancy",$(this).find("#vacancy").val()),a.append("file_cv",$("#file-cv").prop("files")[0]),$.ajax({type:"POST",url:myajax.url,data:a,processData:!1,contentType:!1,cache:!1,success:function(a){a=JSON.parse(a);200===a.status?$(".send-cv")[0].reset():(alert(a.info),console.log(a.desc))},complete:function(a){}}))}),$("#vacancy").select2({width:"100%"}),$("#billing_country").select2({width:"100%"}),$(".go-home").on("click",function(){document.location.href="/"}),$("#detach").detach().addClass("active").prependTo("#menu-main"),$(".open-login").on("click",function(){var a=$("body").find(".form-login");a.length?a.addClass("active"):$.ajax({type:"GET",url:myajax.url,data:{action:"get_login_modal"},beforeSend:function(){$(".loader-box").addClass("active")},complete:function(){$(".loader-box").removeClass("active")},success:function(a){a&&$("header").append(a)}})}),$("body").on("click",".add-single-product",function(a){a.preventDefault();a=$(this).data("id");$.ajax({type:"POST",url:myajax.url,data:{action:"add_single_product",id:a},beforeSend:function(){$(".loader-box").addClass("active")},complete:function(){$(".loader-box").removeClass("active")},success:function(a){a&&console.log(a)}})})});