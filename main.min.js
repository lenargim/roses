let $=jQuery;function is_form_disabled(e){let a=[];return e.find(".required").each(function(){var e=$(this).find("input, textarea");e.val()?$(this).removeClass("error"):($(this).addClass("error"),a.push(e.attr("name")))}),!!a.length}$(document).ready(function(){$(".phone").mask("+7(Z00) 000-00-00",{translation:{Z:{pattern:/[0-79]/}}}),$(".sidebar__button").on("click",function(){$(this).parent(".sidebar__toggle").toggleClass("open")}),$(".change-product-qty").on("click",function(){var e=$(this).data("type"),a=$(this).siblings(".quantity").find("input"),t=+a.val();let n;n="plus"===e?!(e=a.attr("max"))||1+t<=e?1+t:e:(e=a.attr("min")||1)<=t-1?t-1:e,a.val(n)}),$(document).on("click",".single_add_to_cart_button:not(.disabled)",function(e){let a=$(this),t=a.closest("form.cart"),n=(o=t[0],o=new FormData(o,this),s={},o.forEach(function(t,n){var o,i;n.includes("[")?(o=n.split(/\[|\]/).filter(function(e){return e}),i=s,o.forEach(function(e,a){a===o.length-1?Array.isArray(i[e])?i[e].push(t):i[e]?i[e]=[i[e],t]:i[e]=n.includes("[]")?[t]:t:(i[e]||(i[e]={}),i=i[e])})):s[n]?Array.isArray(s[n])?s[n].push(t):s[n]=[s[n],t]:s[n]=t}),s.variation_id?s.product_id=s.variation_id:!s.product_id&&s["add-to-cart"]&&(s.product_id=s["add-to-cart"]),delete s["add-to-cart"],s);var o,s;return e.preventDefault(),$(document.body).trigger("adding_to_cart",[a,n]),$.ajax({type:"POST",url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:n,beforeSend:function(){a.prop("disabled",!0),a.removeClass("added").addClass("loading")},complete:function(){a.prop("disabled",!1),a.addClass("added").removeClass("loading")},success:function(e){t.find('input[name="quantity"]')[0].value=1,e.error&&e.product_url?window.location=e.product_url:$(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,a])}}),!1}),$("body").on("click",".modal__close",function(){$(".dark").removeClass("active")}),$(".file-wrap").on("change","input[type=file]",function(){var e=this.files[0];10485760<e.size?(alert("Превышен допустимый размер. 10MB Максимум."),this.value=""):$(this).siblings(".file-text").html(e.name)}),$(".send-cv").on("submit",async function(e){e.preventDefault();let a=[];$(this).find(".required").each(function(){$(this).find("input").val()||($(this).addClass("error"),a.push($(this).attr("name")))}),a.length||((e=new FormData).append("action","send_cv"),e.append("full_name",$(this).find("#full-name").val()),e.append("phone",$(this).find("#phone").val()),e.append("vacancy",$(this).find("#vacancy").val()),e.append("file_cv",$("#file-cv").prop("files")[0]),$.ajax({type:"POST",url:myajax.url,data:e,processData:!1,contentType:!1,cache:!1,success:function(e){e=JSON.parse(e);200===e.status?$(".send-cv")[0].reset():(alert(e.info),console.log(e.desc))},complete:function(e){}}))}),$("#vacancy").select2({width:"100%"}),$("#billing_country").select2({width:"100%"}),$(".go-home").on("click",function(){document.location.href="/"}),$("#detach").detach().addClass("active").prependTo("#menu-main"),$(".open-login").on("click",function(){var e=$("body").find(".form-login");e.length?e.addClass("active"):$.ajax({type:"GET",url:myajax.url,data:{action:"get_login_modal"},beforeSend:function(){$(".loader-box").addClass("active")},complete:function(){$(".loader-box").removeClass("active")},success:function(e){e&&$("header").append(e)}})}),$("body").on("click",".modal-login__forgot",function(){$(".dark").removeClass("active"),$(".form-reset").addClass("active")}),$(".modal-advise__form").on("input change",function(){$(this).find("[type=submit]").prop("disabled",is_form_disabled($(this)))}),$("body").on("input change","#lost-password",function(){$(this).find("[type=submit]").prop("disabled",is_form_disabled($(this)))}),$("body").on("submit","#lost-password",function(e){e.preventDefault();let t=$(this).find("#user_login").val();e={action:"lost_password",user_login:t,nonce:$(this).find("#_wpnonce").val()};$.ajax({type:"POST",url:myajax.url,data:e,beforeSend:function(){$(".loader-box").addClass("active")},complete:function(){$(".loader-box").removeClass("active")},success:function(e){var a;e&&(e.sent?($(this).trigger("reset"),a=t.replace(/(\w{2})[\w.-]+@([\w.]+\w)/,"$1***@$2"),$(".user-new-email").text(a),$(".form-reset").removeClass("active"),$(".overlay-reset-sent").addClass("active")):alert(e.msg))}})}),$("body").on("submit","#new_password",function(e){e.preventDefault();e={action:"new_password",user_name:$(this).find("#user_name").val(),key:$(this).find("#key").val(),password:$(this).find("#password").val()};$.ajax({type:"POST",url:myajax.url,data:e,beforeSend:function(){$(".loader-box").addClass("active")},complete:function(){$(".loader-box").removeClass("active")},success:function(e){e?($(this).trigger("reset"),$(".form-new-password-thx").addClass("active")):alert("Ошибка. Пароль не задан")}})}),$("body").on("input change","#new_password",function(){$(this).find("[type=submit]").prop("disabled",is_form_disabled($(this)))}),$("body").on("input change","#questions-form",function(){$(this).find("[type=submit]").prop("disabled",is_form_disabled($(this)))}),$("body").on("submit","#questions-form",function(e){e.preventDefault();e={action:"send_question",name:$(this).find("input[name=name]").val(),phone:$(this).find("input[name=phone]").val(),email:$(this).find("input[name=email]").val()};$.ajax({type:"POST",url:myajax.url,data:e,beforeSend:function(){$(".loader-box").addClass("active")},complete:function(){$(".loader-box").removeClass("active")},success:function(e){e?(console.log(e),$(this).trigger("reset"),$(".form-questions").removeClass("active"),$(".overlay-questions-thx").addClass("active")):alert("Ошибка отправки")}})}),$("body").on("click",".modal__close-login",function(){$(".dark").removeClass("active"),$.ajax({type:"GET",url:myajax.url,data:{action:"get_login_modal"},beforeSend:function(){$(".loader-box").addClass("active")},complete:function(){$(".loader-box").removeClass("active")},success:function(e){e&&$("header").append(e)}})}),$("body").on("click",".open-questions",function(){$.ajax({type:"GET",url:myajax.url,data:{action:"get_questions_modal"},beforeSend:function(){$(".loader-box").addClass("active")},complete:function(){$(".loader-box").removeClass("active")},success:function(e){e&&($("header").append(e),$(".phone").mask("+7(Z00) 000-00-00",{translation:{Z:{pattern:/[0-79]/}}}))}})})});